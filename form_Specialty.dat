<?xml version="1.0" encoding="ISO-8859-1"?>

<document signature="Hero Lab Data">

  <portal
    id="prtSpec"
    style="tblNormal">
    <table_dynamic
      component="Specialty"
      showtemplate="SpecPick"
      choosetemplate="SpecPick2"
      scrollable="yes"
      alwaysupdate="yes"
      candidatepick="SpecHelp"
      candidatefield="SpecExpr"
      addpick="SpecHelp">
      
      <!--titlebar><![CDATA[
        @text = "Add a Specialty"
        ]]></titlebar-->
      <!--headertitle><![CDATA[
        @text = "Specialty"
        ]]></headertitle-->
      <additem><![CDATA[
        @text = "Add Specialty"
        ]]>
        </additem>
      </table_dynamic>      
    </portal>

  <template
    id="SpecPick"
    name="Specialty Pick"
    compset="Specialty"
    marginhorz="3"
    marginvert="1">

    <portal
      id="name"
      style="lblSmall">
      <label>
        <labeltext><![CDATA[
          @text = field[thingname].text
          ]]></labeltext>
        </label>
      </portal>
    
    <portal
      id="delete"
      style="actDelete"
      tiptext="Click to delete this item">
      <action
        action="delete">
        </action>
      </portal>
      
    <portal
    id="domain"
    style="editNormal">
    <edit
      field="domDomain">
      </edit>
    </portal>

    <position><![CDATA[
    
      ~set up our height based on our tallest portal
      height = portal[name].height

      ~if this is a "sizing" calculation, we're done
      doneif (issizing <> 0)

      ~position our tallest portal at the top
      portal[name].top = 0
      portal[name].left = 0
      portal[name].width = 250
      
      ~center the other portals vertically
      perform portal[delete].centervert

      ~position the delete portal on the far right
      perform portal[delete].alignedge[right,0]
      
      ~if we don't need a domain, hide it and let the name use all available space
      if (tagis[User.NeedDomain] = 0) then
        portal[domain].visible = 0
        portal[name].width = minimum(portal[name].width,portal[delete].left - portal[name].left - 10)

      ~otherwise, position the domain portals next to the name
      else
        perform portal[domain].alignrel[ltor,name,5]
        portal[domain].width = 50
        endif 
      

      ]]></position>
    </template>

  <template
    id="SpecPick2"
    name="Specialty Pick (no Domain field)"
    compset="Specialty"
    marginhorz="3"
    marginvert="1">

    <portal
      id="name"
      style="lblSmall">
      <label>
        <labeltext><![CDATA[
          @text = field[name].text
          ]]></labeltext>
        </label>
      </portal>
    
    <position><![CDATA[
    
      ~set up our height based on our tallest portal
      height = portal[name].height

      ~if this is a "sizing" calculation, we're done
      doneif (issizing <> 0)

      ~position our tallest portal at the top
      portal[name].top = 0
      portal[name].left = 0
      portal[name].width = 150
      
      ]]></position>
    </template>

  <layout
    id="laySpec"
    marginvert="4">
    <portalref portal="prtSpec" taborder="20"/>
    <position><![CDATA[
      ~perform portal[prtSpec].batchadd
      ~perform batchplace
      
      ~position and size the table to span the full layout
      portal[prtSpec].left = 0
      portal[prtSpec].width = width
      portal[prtSpec].height = 400
      
      
      ]]></position>
    </layout>

  <form
	id="frmSpec"
	name="Specialty"
	marginhorz="10"
	marginvert="5">
	<layoutref layout="laySpec"/>
	<position><![CDATA[
	  layout[laySpec].width = 400
	  perform layout[laySpec].render
	  width = layout[laySpec].width
	  height = 400
	  ]]></position>
	</form>

  </document>
