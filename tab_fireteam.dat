<?xml version="1.0" encoding="UTF-8"?>

<!-- This file contains the definition of the "Fireteam" tab panel. This tab is where
      the user selects the skills for the character.

      All public visual elements used with this tab panel start with the prefix "ft"
      to associate them with the tab.
-->

<document signature="Hero Lab Data">


  <!-- skSkills portal
        Presents a fixed table where the user can adjust skills for the
        character.
  -->
  <!--portal
  id="ftSkills"
  style="tblNormal">
    
    <table_fixed component="FTMember" showtemplate="FTMPick">
      <headertitle>
        @text="Fireteam Members"
      </headertitle>
    </table_fixed>
  </portal-->
  
  <portal
  id="ftMembers"
  style="tblNormal">
    <table_fixed component="FTMember" showtemplate="FTMPick">
      <headertitle>
        @text="Fireteam Members"
      </headertitle>
    </table_fixed>
  </portal>
  
  <template
    id="FTMPick"
    name="Fireteam Member Pick"
    compset="FTMember"
    marginhorz="5"
    marginvert="10">
    
    <portal
      id="name"
      style="editNormal">
      <edit
        field="ftName">
        </edit>
      </portal>

    <portal
      id="physical"
      style="lblXLarge">
      <label
        field="ftPhysical">
        </label>
      </portal>
    
    <portal
      id="mental"
      style="lblXLarge">
      <label
        field="ftMental">
        </label>
      </portal>
    
    <portal
      id="social"
      style="lblXLarge">
      <label
        field="ftSocial">
        </label>
      </portal>
    
    <portal
      id="combat"
      style="lblXLarge">
      <label
        field="ftComDam">
        </label>
      </portal>
    
    <portal
      id="role"
      style="menuNormal">
      <menu_things
        field="FTRole"
        component="FTRole"
        maxvisible="20">
        </menu_things>
      </portal>
    
    <portal
      id="skill_1"
      style="menuNormal">
      <menu_things
        field="skillCh1"
        component="FTSkill"
        maxvisible="20"
        candidatefield="availSk1">
        </menu_things>
      </portal>
    
    <portal
      id="skill_2"
      style="menuNormal">
      <menu_things
        field="skillCh2"
        component="FTSkill"
        maxvisible="20"
        candidatefield="availSk2">
        </menu_things>
      </portal>
    
    <portal
      id="edit"
      style="actOvalSm"
      tiptext="Click to define Fireteam member">
      <action
        action="edit"
        buttontext="Edit">
        </action>
      </portal>

    <position><![CDATA[
      ~set up our height based on our tallest pair of portals
      height = portal[name].height + portal[skill_1].height + 10
      portal[name].width = 100
      portal[physical].width = 50
      portal[mental].width = 50
      portal[social].width = 50
      portal[combat].width = 100
      
      portal[role].width = 100
      portal[skill_1].width = 100
      portal[skill_2].width = 100
      
      ~if this is a "sizing" calculation, we're done
      if (issizing <> 0) then
        done
        endif

      ~position our portals alone the top
      portal[name].top = 2
      portal[physical].top = 2
      portal[mental].top = 2
      portal[social].top = 2
      portal[combat].top = 2
      portal[edit].top = 2
            
      ~position the edit portal on the far right
      perform portal[edit].alignedge[right,0]

      ~position the name on the left, and the other table entries to its right
      portal[name].left = 0
      portal[physical].left = portal[name].right + 5
      portal[mental].left = portal[physical].right + 5
      portal[social].left = portal[mental].right + 5
      portal[combat].left = portal[social].right + 5
      
      ~position the skill edit boxes below the above line
      
      portal[role].top = height - portal[role].height
      
      portal[skill_1].top = height - portal[skill_1].height
      portal[skill_2].top = height - portal[skill_2].height
      
      portal[role].left = 5
      portal[skill_1].left = portal[role].right + 5
      portal[skill_2].left = portal[skill_1].right + 5
      
      ~if a menu is visible, make sure it has a selection
      if (portal[skill_1].visible <> 0) then
        if (field[skillCh1].ischosen = 0) then
          perform portal[skill_1].setstyle[menuErrSm]
          endif
        endif
      
       ~if a menu is visible, make sure it has a selection
      if (portal[skill_2].visible <> 0) then
        if (field[skillCh2].ischosen = 0) then
          perform portal[skill_2].setstyle[menuErrSm]
          endif
        endif
      
      ]]></position>
    </template>
  
  <!--template
    id="FTSPick"
    name="Fireteam Skill Pick"
    compset="FTSkill"
    marginhorz="3"
    marginvert="2">
  
    <portal
      id="name"
      style="lblLarge"
      showinvalid="yes">
      <label
        field="thingname">
        </label>
      </portal>

    <portal
      id="info"
      style="actInfo">
      <action
        action="info">
        </action>
      <mouseinfo mousepos="middle+above"/>
      </portal>

    <portal
      id="value"
      style="lblLarge">
      <label
        field="trtFinal">
        </label>
      </portal>
    
    <position><![CDATA[
      ~set up our height based on our tallest portal
      height = portal[info].height

      ~if this is a "sizing" calculation, we're done
      if (issizing <> 0) then
        done
        endif

      ~position our tallest portal at the top
      portal[info].top = 0

      ~position the other portals vertically
      perform portal[name].centervert
      perform portal[value].centervert
      
      ~position the info portal on the far right
      perform portal[info].alignedge[right,0]

      ~position the name on the left
      portal[name].left = 0
      
      portal[name].width = minimum(portal[name].width,portal[info].left - portal[name].left - 10)
     
      portal[value].left = 100
      ]]></position>
    </template-->

<layout
  id="ftSkills">
  <!--portalref portal="ftSkills" taborder="10"/-->
  <portalref portal="ftMembers" taborder="20"/>
  
  <position><![CDATA[
    ~ portal[ftSkills].visible = 1
    portal[ftMembers].visible = 1
    
    autogap =  3

    ~ perform portal[ftSkills].batchadd
    perform portal[ftMembers].batchadd
    
    perform batchplace

    height = autotop

    ]]></position>
  </layout>

<panel
  id="ftPanel"
  name="Fireteam"
  marginhorz="5"
  marginvert="5"
  order="120">
  <live>!HideTab.skills</live>
  <layoutref layout="ftSkills"/>
  <position><![CDATA[
    ]]></position>
  </panel>
  </document>
